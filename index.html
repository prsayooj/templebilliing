<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Temple POS</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#b45309">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">

    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #f8fafc; font-family: sans-serif; }
        iframe { position: fixed; top: 0; left: 0; bottom: 0; right: 0; width: 100%; height: 100%; border: none; z-index: 10; }
        
        /* Fallback Button (Only shows if user clicks "Help") */
        #helpBtn {
            position: fixed; bottom: 20px; right: 20px; z-index: 9999;
            background: rgba(0,0,0,0.5); color: white; border: none;
            border-radius: 50px; padding: 8px 15px; font-size: 12px;
            cursor: pointer; backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>

    <iframe 
        id="appFrame"
        src="https://script.google.com/macros/s/AKfycbyeThT_oekXyMslcgcWMOpPRUuwu54AMCV6PGJfbg2UP6go-bHsXJy8dbSGmrBz3-XF7g/exec"
        sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation allow-downloads">
    </iframe>

    <button id="helpBtn" onclick="openDirect()">⚠️ Not Loading? Click Here</button>

    <script>
        function openDirect() {
            // Opens the App in a full tab to bypass Iframe restrictions
            let url = document.getElementById('appFrame').src;
            window.open(url, '_blank');
        }

        // Service Worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').catch(console.log);
        }
    </script>

</body>
</html>
